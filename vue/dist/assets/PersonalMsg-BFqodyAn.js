/* empty css             *//* empty css               *//* empty css              *//* empty css              *//* empty css                  *//* empty css                  *//* empty css                */import{_ as q,r as A,a as g,s as F,c as i,b as s,d as n,w as o,e as K,u as p,g as c,h as T,Y as J,F as E,z as $,a3 as L,D as O,E as Y,y as G,i as B,o as r,k as H,l as _,m as Q,f as m,t as w,p as W,q as X,j as Z,a4 as ee}from"./index-BhvLEkWq.js";import{_ as z}from"./avatar-CU16OVzy.js";import{r as te}from"./request-DstbRXb0.js";const se={style:{position:"fixed",top:"0",left:"0","z-index":"100","border-bottom":"1px solid #ccc","box-shadow":"0 4px 4px -2px rgba(0, 0, 0, 0.3)",display:"flex","justify-content":"center","align-items":"center",width:"100%",height:"58px","background-color":"#ffffff"}},ne={key:0,style:{"margin-left":"auto","margin-right":"100px",width:"fit-content",display:"flex","padding-right":"10px","align-items":"center"}},oe={style:{display:"flex","align-items":"center","font-size":"15px","grid-gap":"6px"}},le={key:1,style:{"margin-left":"auto","margin-right":"100px",width:"fit-content",display:"flex","padding-right":"10px","align-items":"center"}},ae={style:{display:"flex","align-items":"center"}},re={style:{"margin-left":"5px"}},ie=["src"],de={class:"card",style:{height:"800px",width:"1000px",display:"flex",margin:"80px auto",border:"1px solid #ccc","border-radius":"8px",overflow:"hidden"}},ue={class:"user-list",style:{width:"200px","border-right":"1px solid #ccc",padding:"10px","overflow-y":"auto"}},pe=["onClick"],ce=["src"],me={class:"user-name"},fe={class:"chat-container",style:{flex:"1",display:"flex","flex-direction":"column"}},ge={class:"chat-history",style:{flex:"1","overflow-y":"auto",padding:"10px"}},ve={key:0,src:z,alt:"对方头像",class:"avatar"},_e=["src"],xe={class:"chat-input",style:{display:"flex",padding:"5px","border-top":"1px solid #ccc"}},ye={__name:"PersonalMsg",setup(he){const l=A({user:JSON.parse(localStorage.getItem("user")||"{}"),users:[]});(()=>{te.get("/user/selectAll").then(a=>{a.code==="200"?l.users=a.data:G.error(a.msg)})})();const I=g([{sender:-1,content:"您有新的私信消息，请查收！"},{sender:-1,content:"有人收藏了您的攻略，快去看看吧！"}]),x=g(null),d=g([]),y=a=>{x.value=a,a.id===-1?d.value=I.value:a.id===2?d.value=[]:d.value=[]},f=g(""),h=g(null),C=()=>{if(f.value.trim()){const a={sender:l.user.id,content:f.value};if(d.value.push(a),f.value="",x.value&&x.value.id===-1){const e={sender:-1,content:"你好呀"};d.value.push(e)}h.value.focus()}};return F(()=>{y({id:-1,name:"系统通知",avatar:"@/assets/imgs/avatar.png"}),h.value.focus()}),(a,e)=>{const b=Q,N=K,v=X,V=W,D=T,P=B("Bell"),M=Z,U=J,R=O,S=B("Position"),j=Y;return r(),i("div",null,[s("div",se,[s("div",null,[n(N,{"default-active":"/front",style:{"margin-left":"100px",display:"flex","border-right":"none"},router:""},{default:o(()=>[n(b,{index:"/front"},{default:o(()=>e[9]||(e[9]=[m("首页")])),_:1}),l.user.role==="ADMIN"?(r(),H(b,{key:0,onClick:e[0]||(e[0]=t=>p(c).push("/manager/home"))},{default:o(()=>e[10]||(e[10]=[m("后台系统 ")])),_:1})):_("",!0)]),_:1})]),l.user.role?(r(),i("div",le,[n(D,null,{dropdown:o(()=>[n(V,null,{default:o(()=>[n(v,{onClick:e[3]||(e[3]=t=>a.navTo("/front/personalPage?id="+l.user.id))},{default:o(()=>e[12]||(e[12]=[m("个人页面")])),_:1}),n(v,{onClick:e[4]||(e[4]=t=>p(c).push("/manager/person"))},{default:o(()=>e[13]||(e[13]=[m("编辑信息")])),_:1}),n(v,{onClick:e[5]||(e[5]=t=>p(c).push("/manager/updatePassword"))},{default:o(()=>e[14]||(e[14]=[m("修改密码")])),_:1}),n(v,{onClick:a.logout},{default:o(()=>e[15]||(e[15]=[m("退出登录")])),_:1},8,["onClick"])]),_:1})]),default:o(()=>{var t,u,k;return[s("div",ae,[s("span",re,w((t=l.user)==null?void 0:t.name),1),(u=l.user)!=null&&u.avatar?(r(),i("img",{key:0,style:{width:"40px",height:"40px","border-radius":"50%"},src:(k=l.user)==null?void 0:k.avatar},null,8,ie)):_("",!0)])]}),_:1}),n(U,{onClick:e[6]||(e[6]=t=>p(c).push("/front/personalMsg")),style:{cursor:"pointer","margin-left":"10px"},class:"item","is-dot":"",offset:[5,5]},{default:o(()=>[n(M,{size:"large"},{default:o(()=>[n(P)]),_:1})]),_:1})])):(r(),i("div",ne,[s("div",oe,[s("div",{class:"tourist",onClick:e[1]||(e[1]=t=>p(c).push("/login"))},"登录"),e[11]||(e[11]=s("div",{style:{color:"#36e8fa"}},"/",-1)),s("div",{class:"tourist",onClick:e[2]||(e[2]=t=>p(c).push("/register"))},"注册")])]))]),s("div",de,[s("div",ue,[s("div",{class:"user-item",onClick:e[7]||(e[7]=t=>y({id:-1,name:"系统通知",avatar:"@/assets/imgs/avatar.png"}))},e[16]||(e[16]=[s("img",{src:z,alt:"系统通知头像",class:"user-avatar"},null,-1),s("span",{class:"user-name"},"系统通知",-1)])),(r(!0),i(E,null,$(l.users,(t,u)=>(r(),i("div",{key:u,class:"user-item",onClick:k=>y(t)},[s("img",{src:t.avatar||"@/assets/imgs/avatar.png",alt:"用户头像",class:"user-avatar"},null,8,ce),s("span",me,w(t.name),1)],8,pe))),128))]),s("div",fe,[s("div",ge,[(r(!0),i(E,null,$(d.value,(t,u)=>(r(),i("div",{key:u,class:"message"},[t.sender!==l.user.id?(r(),i("img",ve)):_("",!0),s("div",{class:ee(["message-content",{"own-message":t.sender===l.user.id}])},[s("span",null,w(t.content),1)],2),t.sender===l.user.id?(r(),i("img",{key:1,src:l.user.avatar,alt:"当前用户头像",class:"avatar"},null,8,_e)):_("",!0)]))),128))]),s("div",xe,[n(R,{modelValue:f.value,"onUpdate:modelValue":e[8]||(e[8]=t=>f.value=t),placeholder:"请输入消息",style:{flex:"1","margin-right":"10px",height:"60px",padding:"8px",display:"flex","align-items":"flex-start","box-sizing":"border-box"},onKeyup:L(C,["enter"]),ref_key:"inputRef",ref:h},null,8,["modelValue"]),n(j,{style:{height:"60px",width:"60px"},onClick:C},{default:o(()=>[n(M,{size:"large"},{default:o(()=>[n(S)]),_:1})]),_:1})])])])])}}},Ve=q(ye,[["__scopeId","data-v-0986c140"]]);export{Ve as default};
