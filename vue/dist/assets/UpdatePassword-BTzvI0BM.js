/* empty css             *//* empty css               *//* empty css                  *//* empty css              */import{r as w}from"./request-DstbRXb0.js";import{r as c,a as g,c as _,b as u,d as s,w as a,M as I,E as x,o as V,N as P,D as k,f as b,y as d}from"./index-BhvLEkWq.js";const v={class:"card"},y={style:{"text-align":"center"}},L={__name:"UpdatePassword",setup(E){const o=c({user:JSON.parse(localStorage.getItem("user")||" {}"),rules:{password:[{required:!0,message:"请填写密码",trigger:"blur"}],newPassword:[{required:!0,message:"请填写新密码",trigger:"blur"}],new2Password:[{required:!0,message:"请确认新密码",trigger:"blur"}]}}),m=()=>{p.value.validate(r=>{r&&w.post("/updatePassword",o.user).then(e=>{e.code==="200"?(d.success("修改成功"),setInterval(()=>{localStorage.removeItem("user"),location.href="/login"},500)):d.error(e.msg)})})},p=g();return(r,e)=>{const l=k,n=P,i=I,f=x;return V(),_("div",v,[e[4]||(e[4]=u("div",{style:{"font-size":"16px"}},"修改密码",-1)),s(i,{ref_key:"formRef",ref:p,model:o.user,"label-width":"80px",rules:o.rules,style:{padding:"20px 30px 10px 0"}},{default:a(()=>[s(n,{prop:"password",label:"原密码"},{default:a(()=>[s(l,{size:"large","show-password":"",placeholder:"密码",modelValue:o.user.password,"onUpdate:modelValue":e[0]||(e[0]=t=>o.user.password=t),autocomplete:"off","prefix-icon":"Lock",onInput:r.checkInput},null,8,["modelValue","onInput"])]),_:1}),s(n,{prop:"newPassword",label:"新密码"},{default:a(()=>[s(l,{size:"large","show-password":"",placeholder:"密码",modelValue:o.user.newPassword,"onUpdate:modelValue":e[1]||(e[1]=t=>o.user.newPassword=t),autocomplete:"off","prefix-icon":"Lock",onInput:r.checkInput},null,8,["modelValue","onInput"])]),_:1}),s(n,{prop:"new2Password",label:"确认密码"},{default:a(()=>[s(l,{size:"large","show-password":"",placeholder:"密码",modelValue:o.user.new2Password,"onUpdate:modelValue":e[2]||(e[2]=t=>o.user.new2Password=t),autocomplete:"off","prefix-icon":"Lock",onInput:r.checkInput},null,8,["modelValue","onInput"])]),_:1})]),_:1},8,["model","rules"]),u("div",y,[s(f,{type:"primary",style:{padding:"20px 30px"},onClick:m},{default:a(()=>e[3]||(e[3]=[b("保存")])),_:1})])])}}};export{L as default};
