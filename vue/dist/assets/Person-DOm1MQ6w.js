/* empty css             *//* empty css                  *//* empty css                 *//* empty css               *//* empty css              */import{r as y}from"./request-DstbRXb0.js";import{r as U,B as E,c as N,b as m,d as o,w as l,M as v,o as I,N as S,D as k,G as B,u as w,E as F,f as d,y as i,g as M}from"./index-BhvLEkWq.js";const C={class:"card"},D={style:{"text-align":"center"}},G={__name:"Person",emits:["updateUser"],setup(J,{emit:f}){const t=U({user:JSON.parse(localStorage.getItem("user")||" {}")}),{appContext:n}=E(),c=n==null?void 0:n.config.globalProperties.$baseUrl,_=f,V=s=>{t.user.avatar=s.data},g=()=>{let s;t.user.role==="ADMIN"&&(s="/admin/update"),t.user.role==="USER"&&(s="/user/update"),y.put(s,t.user).then(e=>{e.code==="200"?(i.success("更新成功"),localStorage.setItem("user",JSON.stringify(t.user)),M.push("/manager/home"),_("updateUser")):i.error(e.msg)})};return(s,e)=>{const u=k,r=S,p=F,b=B,x=v;return I(),N("div",C,[e[6]||(e[6]=m("div",{style:{"font-size":"15px"}},"个人信息",-1)),o(x,{ref:"formRef",model:t.user,"label-width":"80px",style:{padding:"20px 30px 30px 0"}},{default:l(()=>[o(r,{prop:"username",label:"账号"},{default:l(()=>[o(u,{modelValue:t.user.username,"onUpdate:modelValue":e[0]||(e[0]=a=>t.user.username=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(r,{prop:"name",label:"名称"},{default:l(()=>[o(u,{modelValue:t.user.name,"onUpdate:modelValue":e[1]||(e[1]=a=>t.user.name=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(r,{prop:"phone",label:"电话"},{default:l(()=>[o(u,{modelValue:t.user.phone,"onUpdate:modelValue":e[2]||(e[2]=a=>t.user.phone=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(r,{prop:"email",label:"邮箱"},{default:l(()=>[o(u,{modelValue:t.user.email,"onUpdate:modelValue":e[3]||(e[3]=a=>t.user.email=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(r,{prop:"avatar",label:"头像"},{default:l(()=>[o(b,{action:w(c)+"/files/upload",headers:{token:t.user.token},"on-success":V,"list-type":"picture"},{default:l(()=>[o(p,{type:"primary"},{default:l(()=>e[4]||(e[4]=[d("上传头像")])),_:1})]),_:1},8,["action","headers"])]),_:1}),m("div",D,[o(p,{type:"primary",style:{padding:"20px 30px"},onClick:g},{default:l(()=>e[5]||(e[5]=[d("保存")])),_:1})])]),_:1},8,["model"])])}}};export{G as default};
