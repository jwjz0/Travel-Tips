/* empty css             *//* empty css                     *//* empty css                  *//* empty css               *//* empty css                  *//* empty css              *//* empty css                *//* empty css               */import{a as I,r as M,c as U,b as m,d as l,u as J,C as O,D as h,w as r,E as A,k as _,l as y,H as P,I as T,J as $,y as d,o as f,f as p,K as q,M as F,N as R,O as j}from"./index-BhvLEkWq.js";import{r as u}from"./request-DstbRXb0.js";const H={class:"card",style:{"margin-bottom":"5px"}},K={class:"card",style:{"margin-bottom":"5px"}},G={class:"card",style:{"margin-bottom":"5px"}},L={class:"dialog-footer"},ne={__name:"Category",setup(Q){const c=I({}),e=M({user:JSON.parse(localStorage.getItem("user")),title:null,content:null,pageNum:1,pageSize:5,total:0,tableData:[],form:{},formVisible:!1,rules:{title:[{required:!0,message:"请填写公告",trigger:"blur"}]}}),n=()=>{u.get("/category/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,total:e.total,title:e.title,content:e.content}}).then(o=>{var t,s;o.code==="200"?(e.tableData=(t=o.data)==null?void 0:t.list,e.total=(s=o.data)==null?void 0:s.total):d.error(o.msg)})};n();const b=()=>{e.form={},e.formVisible=!0},V=o=>{e.form=JSON.parse(JSON.stringify(o)),e.formVisible=!0},C=()=>{u.post("/category/add",e.form).then(o=>{o.code==="200"?(d.success("新增成功"),e.formVisible=!1,n()):d.error(o.msg)})},k=()=>{u.put("/category/update",e.form).then(o=>{o.code==="200"?(d.success("更新成功"),e.formVisible=!1,n()):d.error(o.msg)})},x=()=>{c.value.validate(o=>{o&&(e.form.id?k():C())})},N=o=>{j.confirm("删除后与无法恢复，您确认删除吗？","确认删除",{type:"warning"}).then(t=>{u.delete("/category/delete/"+o).then(s=>{s.code==="200"?(d.success("删除成功"),n()):d.error(s.msg)})}).catch(t=>{})},v=()=>{e.title=null,e.content=null,n()};return(o,t)=>{const s=h,i=A,g=q,E=P,z=T,S=R,w=F,D=$;return f(),U("div",null,[m("div",H,[l(s,{clearable:"",onClear:n,style:{width:"240px","margin-right":"5px"},modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=a=>e.title=a),"prefix-icon":J(O),placeholder:"请输入景点类型查询"},null,8,["modelValue","prefix-icon"]),l(i,{type:"primary",onClick:n},{default:r(()=>t[6]||(t[6]=[p("查 询")])),_:1}),l(i,{onClick:v},{default:r(()=>t[7]||(t[7]=[p("重 置")])),_:1})]),m("div",K,[e.user.role==="ADMIN"?(f(),_(i,{key:0,type:"info",onClick:b},{default:r(()=>t[8]||(t[8]=[p("新 增")])),_:1})):y("",!0)]),m("div",G,[l(E,{data:e.tableData,style:{width:"100%"},"header-cell-style":{color:"#333",backgroundColor:"#eaf4ff"}},{default:r(()=>[l(g,{prop:"title",label:"景区类型"}),e.user.role==="ADMIN"?(f(),_(g,{key:0,label:"操作",width:"100"},{default:r(a=>[l(i,{type:"primary",circle:"",icon:"Edit",onClick:B=>V(a.row)},null,8,["onClick"]),l(i,{type:"danger",circle:"",icon:"Delete",onClick:B=>N(a.row.id)},null,8,["onClick"])]),_:1})):y("",!0)]),_:1},8,["data"])]),m("div",null,[l(z,{"current-page":e.pageNum,"onUpdate:currentPage":t[1]||(t[1]=a=>e.pageNum=a),"page-size":e.pageSize,"onUpdate:pageSize":t[2]||(t[2]=a=>e.pageSize=a),layout:"total, sizes, prev, pager, next, jumper","page-sizes":[5,10,20],total:e.total,onCurrentChange:n,onSizeChange:n},null,8,["current-page","page-size","total"])]),l(D,{title:"景区种类",modelValue:e.formVisible,"onUpdate:modelValue":t[5]||(t[5]=a=>e.formVisible=a),width:"40%","destroy-on-close":""},{footer:r(()=>[m("div",L,[l(i,{onClick:t[4]||(t[4]=a=>e.formVisible=!1)},{default:r(()=>t[9]||(t[9]=[p("取消")])),_:1}),l(i,{type:"primary",onClick:x},{default:r(()=>t[10]||(t[10]=[p("保 存")])),_:1})])]),default:r(()=>[l(w,{ref_key:"formRef",ref:c,model:e.form,rules:e.rules,"label-width":"80px",style:{padding:"20px 30px 30px 0"}},{default:r(()=>[l(S,{prop:"title",label:"景点类型"},{default:r(()=>[l(s,{modelValue:e.form.title,"onUpdate:modelValue":t[3]||(t[3]=a=>e.form.title=a),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}};export{ne as default};
